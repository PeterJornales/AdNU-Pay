<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="initial-scale=1, width=device-width" />
    <link rel="stylesheet" href="./global.css" />
    <link rel="stylesheet" href="./payment.css" />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap"
    />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap"
    />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Lexend:wght@300;500;700&display=swap"
    />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Lato:wght@400;700&display=swap"
    />
    <link rel="stylesheet" href="./custom.css" />
    <style>
      .input-with-padding {
        padding: 10px; /* Adjust the padding value as needed */
      }
      .red-background {
        background-color: red !important;
      }
    </style>
  </head>
  <body>
    <div class="payment20">
      <div class="payment-setting">
        <img class="grad-icon9" alt="" src="./public/grad.svg" />
        <div class="extra9">
          <div class="payment21">Payment</div>
          <img
            class="profile-icon9"
            alt=""
            src="./public/profile@2x.png"
            id="profileIcon"
          />
          <div class="welcome4" id="welcomeMessage"></div>
          <div class="extra-child6"></div>
        </div>
        <div class="onsite-form">
          <form class="container-credits2">
            <div class="box5"></div>
            <div class="input-container">
              <div class="student-number">
                <input
                  type="number"
                  class="student-number-input input-with-padding"
                  placeholder="Student Number"
                  id="onsiteStudentNumber"
                  readonly
                />
              </div>
              <div class="amount4">
                <input
                  type="text"
                  class="amount-input input-with-padding"
                  placeholder="Amount"
                  id="onsiteAmount"
                  oninput="validateAmount('onsiteAmount')"
                />
              </div>
            </div>
            <div class="payment22">
              <select
                class="payment-dropdown input-with-padding"
                id="onsitePaymentFor"
              >
                <option value="">Payment for</option>
                <option value="Tuition">Tuition</option>
                <option value="Uniform">Uniform</option>
                <option value="Fees">Other Fees</option>
              </select>
            </div>
            <div class="student-name1">
              <input
                type="text"
                class="student-name-input input-with-padding"
                placeholder="Student Name"
                id="onsiteStudentNameInput"
                readonly
              />
            </div>
            <b class="onsite">Onsite</b>
            <div class="process-button" id="processButtonContainer">
              <img
                class="process-button-child"
                alt=""
                src="./public/rectangle-4042.svg"
                id="proceedButton"
              />
              <div class="proceed">PROCEED</div>
            </div>
          </form>
        </div>
        <div class="offsite">
          <form class="container-credits3">
            <div class="box6"></div>
            <div class="form-amount">
              <input
                type="text"
                class="student-name-input input-with-padding"
                placeholder="Student Name"
                id="offsiteStudentNameInput"
                readonly
              />
            </div>
            <div class="form-amount1">
              <input
                type="number"
                class="student-number-input input-with-padding"
                placeholder="Student Number"
                id="offsiteStudentNumber"
                readonly
              />
            </div>
            <div class="form-amount2">
              <input
                type="text"
                class="amount-input input-with-padding"
                placeholder="Amount"
                id="offsiteAmount"
                oninput="validateAmount('offsiteAmount')"
              />
            </div>
            <div class="payment22">
              <select
                class="payment-dropdown input-with-padding"
                id="offsitePaymentFor"
              >
                <option value="Tuition">Tuition</option>
              </select>
            </div>
            <b class="offsite1">Online</b>
            <div class="process-button1" id="proceedOnlineButton">
              <div class="process-button-item" id="onlineButtonBox"></div>
              <div class="proceed-online">PROCEED</div>
            </div>
          </form>
        </div>
      </div>
      <div class="sidebar9">
        <div class="background9"></div>
        <div class="adnupay-ver01beta9">AdNUPay ver0.1beta</div>
        <div class="hover9"></div>
        <div class="settings25" id="settingsContainer">
          <div class="settings26">Settings</div>
          <div class="rectangle-parent6">
            <div class="group-child36"></div>
            <div class="group-child37"></div>
            <div class="group-child38"></div>
            <div class="group-child39"></div>
          </div>
        </div>
        <div class="transaction20" id="transactionContainer">
          <div class="transaction21">Transaction</div>
          <img class="transaction-child6" alt="" src="./public/group-4.svg" />
        </div>
        <div class="payment23">
          <div class="payment24">Payment</div>
          <img class="payment-child8" alt="" src="./public/group-31.svg" />
        </div>
        <div class="dashboard19" id="dashboardContainer">
          <div class="dashboard20">Dashboard</div>
          <img class="dashboard-child7" alt="" src="./public/group-21.svg" />
        </div>
        <img
          class="header-icon9"
          alt=""
          src="./public/header@2x.png"
          id="headerImage"
        />
      </div>
    </div>

    <script>
      function displayStudentInfo() {
        var studentID = localStorage.getItem("studentID");
        var studentName = localStorage.getItem("name");
        if (studentID) {
          var onsiteStudentNumberInput = document.getElementById(
            "onsiteStudentNumber"
          );
          var offsiteStudentNumberInput = document.getElementById(
            "offsiteStudentNumber"
          );
          if (onsiteStudentNumberInput) {
            onsiteStudentNumberInput.value = studentID;
          }
          if (offsiteStudentNumberInput) {
            offsiteStudentNumberInput.value = studentID;
          }
        }
        if (studentName) {
          var onsiteStudentNameInput = document.getElementById(
            "onsiteStudentNameInput"
          );
          var offsiteStudentNameInput = document.getElementById(
            "offsiteStudentNameInput"
          );
          if (onsiteStudentNameInput) {
            onsiteStudentNameInput.value = studentName;
          }
          if (offsiteStudentNameInput) {
            offsiteStudentNameInput.value = studentName;
          }
        }
        if (studentID) {
          var studentIDElement = document.getElementById("studentID");
          var welcomeMessage = document.getElementById("welcomeMessage");

          if (studentIDElement) {
            studentIDElement.textContent = studentID;
          }
          if (welcomeMessage) {
            welcomeMessage.textContent = "Welcome, " + studentID + "!";
          }
        }
      }

      function validateAmount(inputId) {
        var tuitionBalance = parseFloat(localStorage.getItem("tuition")) || 0;
        var amountInput = document.getElementById(inputId);
        var amount = parseFloat(amountInput.value) || 0;

        if (amount > tuitionBalance) {
          amountInput.value = tuitionBalance;
        }
      }

      document.addEventListener("DOMContentLoaded", function () {
        displayStudentInfo();
      });

      document.addEventListener("wheel", function (event) {
        if (document.activeElement.type === "number") {
          document.activeElement.blur();
        }
      });

      var profileIcon = document.getElementById("profileIcon");
      if (profileIcon) {
        profileIcon.addEventListener("click", function (e) {
          window.location.href = "./account-information.html";
        });
      }

      var processButtonContainer = document.getElementById(
        "processButtonContainer"
      );
      var proceedButton = document.getElementById("proceedButton");

      if (processButtonContainer) {
        processButtonContainer.addEventListener("click", function (e) {
          const studentNumber = document.querySelector(
            ".onsite-form .student-number-input"
          ).value;
          const amount = document.querySelector(
            ".onsite-form .amount-input"
          ).value;
          const paymentFor = document.querySelector(
            ".onsite-form .payment-dropdown"
          ).value;
          const studentName = document.querySelector(
            ".onsite-form .student-name-input"
          ).value;

          if (studentNumber && amount && paymentFor && studentName) {
            const date = new Date().toLocaleString();

            localStorage.setItem("studentNumber", studentNumber);
            localStorage.setItem("amount", amount);
            localStorage.setItem("paymentFor", paymentFor);
            localStorage.setItem("studentName", studentName);
            localStorage.setItem("date", date);

            window.location.href = "./queue.html";
          } else {
            proceedButton.style.backgroundColor = "red";
            setTimeout(() => {
              proceedButton.style.backgroundColor = "";
            }, 2000);
          }
        });
      }

      var proceedOnlineButton = document.getElementById("proceedOnlineButton");
      var onlineButtonBox = document.getElementById("onlineButtonBox");
      var proceedOnlineText = document.querySelector(".proceed-online");

      if (proceedOnlineButton) {
        proceedOnlineButton.addEventListener("click", function (e) {
          const studentNumber = document.querySelector(
            ".offsite .student-number-input"
          ).value;
          const amount = document.querySelector(".offsite .amount-input").value;
          const paymentFor = document.querySelector(
            ".offsite .payment-dropdown"
          ).value;
          const studentName = document.querySelector(
            ".offsite .student-name-input"
          ).value;

          if (studentNumber && amount && paymentFor && studentName) {
            const date = new Date().toLocaleString();

            localStorage.setItem("studentNumber", studentNumber);
            localStorage.setItem("amount", amount);
            localStorage.setItem("paymentFor", paymentFor);
            localStorage.setItem("studentName", studentName);
            localStorage.setItem("date", date);

            window.location.href = "./payment-visa.html";
          } else {
            onlineButtonBox.classList.add("red-background");
            setTimeout(() => {
              onlineButtonBox.classList.remove("red-background");
            }, 2000);
          }
        });
      }

      if (proceedOnlineText) {
        proceedOnlineText.addEventListener("click", function (e) {
          proceedOnlineButton.click();
        });
      }

      var settingsContainer = document.getElementById("settingsContainer");
      if (settingsContainer) {
        settingsContainer.addEventListener("click", function (e) {
          window.location.href = "./settings.html";
        });
      }

      var transactionContainer = document.getElementById(
        "transactionContainer"
      );
      if (transactionContainer) {
        transactionContainer.addEventListener("click", function (e) {
          window.location.href = "./transaction.html";
        });
      }

      var paymentContainer = document.getElementById("paymentContainer");
      if (paymentContainer) {
        paymentContainer.addEventListener("click", function (e) {
          window.location.href = "./payment.html";
        });
      }

      var dashboardContainer = document.getElementById("dashboardContainer");
      if (dashboardContainer) {
        dashboardContainer.addEventListener("click", function (e) {
          window.location.href = "./dashboard.html";
        });
      }

      var headerImage = document.getElementById("headerImage");
      if (headerImage) {
        headerImage.addEventListener("click", function (e) {
          window.location.href = "./dashboard.html";
        });
      }
      document.body.style.overflow = "hidden";
    </script>
  </body>
</html>
